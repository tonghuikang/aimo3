# Problem pe-542 Findings

## Problem Summary
- Compute `T(10^17) mod 99991`.
- `T(n) = sum_{k=4}^n (-1)^k S(k)`.
- `S(k)` is the maximum sum of 3+ distinct positive integers `<= k` that form a geometric progression.

## Correct Answer
- `57609`

## Correct Approach
- Parameterize integer GP terms using reduced ratio `p/q`:
  - Terms: `t * p^i * q^{m-1-i}` for `i=0..m-1`, `m>=3`, `t>=1`.
  - Candidate sum: `t * (p^m - q^m)/(p-q)`.
  - Feasibility: `t * max(p^{m-1}, q^{m-1}) <= k`.
- In successful solutions, the optimum family is reduced to consecutive ratios (`q = p-1`), giving:
  - `S(k) = max_{p>=2, m>=3, p^{m-1}<=k} floor(k/p^{m-1}) * (p^m - (p-1)^m)`.
- Compute `T(N)` by change points (where `S(k)` increases):
  - `S(k)` is monotone and piecewise constant.
  - Sum `(-1)^k S(k)` interval-by-interval using parity (`sum (-1)^k` over an interval is `0` for even length, otherwise `(-1)^{start}`).
- Validation checkpoint used in correct traces: `T(1000) = 2268`.

## Wrong Approaches and Why They Fail
- Treating `S(k)` as an additive sum over families (`sum floor(k/L_i)*F_i`) is invalid.
  - `S(k)` is a pointwise `max`, so additive block formulas overcount and produce incorrect totals.
- Over-aggressive pruning from slope-only/convex-hull heuristics misses real optima.
  - Floor/remainder effects matter; smaller bases with larger multipliers can beat near-root choices (e.g., behavior around `k=45`).
- Unproved cutoffs (e.g., dropping low-length/low-base families after a heuristic `K0`) can create inconsistent outputs.
  - Wrong traces using these assumptions ended at the incorrect placeholder answer `0`.

## Key Reference Values
- `S(4)=7`, `S(10)=19`, `S(12)=21`, `S(1000)=3439`.
- `T(1000)=2268`.
