## Problem Summary
- n-player cyclic game where rounds cycle between consecutive player pairs
- Game ends when any player wins 2 consecutive rounds
- Need to find last 8 digits of M_n(k) = numerator * denominator (reduced) of P_n(k)
- Specific: n = 10^8 + 7, k = 10^4 + 7

## Correct Answer
59992576

## Key Insights

### Game Structure
1. A player can only win consecutive rounds if they are the "overlapping" player (right player of round r, left player of round r+1)
2. The game ends when pattern "RL" (right wins, then left wins) occurs in the sequence of outcomes
3. Each round's winner is determined by fair coin: left or right player wins (1/2 each)

### Mathematical Reduction
- The problem reduces to: probability that first occurrence of pattern "RL" in infinite i.i.d. Bernoulli sequence occurs at position r ≡ k-1 (mod n)
- Winner = player ((r mod n) + 1) where r is position of the "R" in the RL pattern

### Distribution of First RL
- P(first RL ends at position t) = t / 2^(t+1) for t ≥ 1
- This is derived from sum of two independent geometric distributions

### Formula for P_n(k)
For k > 1:
P_n(k) = Σ_{ℓ=0}^∞ ((k-1) + ℓn) / 2^{(k-1) + ℓn + 1}

This simplifies to:
P_n(k) = 2^{n-a-1} * (a * 2^n + n - a) / (2^n - 1)^2
where a = k - 1

### Reduction and Final Formula
- Numerator N = 2^{n-a-1} * (a * 2^n + n - a)
- Denominator D = (2^n - 1)^2
- For n prime: gcd(N, D) = 1 (fraction already reduced)
- M_n(k) = N * D = 2^{n-k} * ((k-1)*(2^n-1) + n) * (2^n-1)^2

### Computation
- n = 100,000,007 is prime
- Since n is prime, gcd(n, 2^n - 1) = 1 (by Fermat's Little Theorem: 2^n ≡ 2 (mod n))
- Compute M mod 10^8 using modular arithmetic:
  - M ≡ 0 (mod 256) since 2^{n-k} has exponent >> 8
  - Compute M mod 5^8 = 390625 using modular exponentiation
  - Combine using CRT to get M mod 10^8

## Correct Approach Summary
1. Model game as pattern detection for "RL" in Bernoulli sequence
2. Derive distribution of first occurrence of RL
3. Sum over positions ≡ k-1 (mod n) to get P_n(k)
4. Use closed-form formula for infinite geometric series
5. Verify fraction is reduced (n is prime)
6. Compute M = numerator * denominator mod 10^8

## Wrong Approaches and Why They Fail
- Using the wrong stop pattern (`RR` instead of `RL`): consecutive wins by the same player require "right then left" across adjacent rounds, not two right-wins.
- Treating first `RL` time as a simple geometric process on overlapping 2-bit windows: overlapping windows are dependent; the correct law is \(P(T=t)=t/2^{t+1}\), not \((3/4)^{t-1}(1/4)\).
- Assuming reduction can be skipped for all n: in general \(g=\gcd(N,D)\) may be nontrivial when n is composite; for this instance reduction is trivial only because \(n=100000007\) is prime.
- Concluding \(M \equiv 0 \pmod{10^8}\) from the large power of 2 alone: divisibility by \(2^8\) does not force divisibility by \(5^8\); CRT/mod-5^8 computation is still required.
