# Problem pe-677 Findings

## Problem Statement
Count `g(n)` = number of **unlabeled** colored trees with `n` nodes where:
- Each node is colored red (R), blue (B), or yellow (Y)
- Red nodes have degree `<= 4`
- Blue and yellow nodes have degree `<= 3`
- No edge can connect two yellow nodes (`Y-Y` forbidden)

Given: `g(2)=5`, `g(3)=15`, `g(4)=57`, `g(10)=710249`, `g(100)≡919747298 (mod 10^9+7)`.
Find: `g(10000) mod 10^9+7`.

## Correct Answer
`984183023`

## Key Insight
`g(n)` counts **isomorphism classes** (unlabeled trees), not labeled colorings.
For `n=2`, only unordered endpoint color pairs matter:
`{R,R},{R,B},{R,Y},{B,B},{B,Y}` (exclude `{Y,Y}`), so `g(2)=5`.

## Correct Approach
1. Define parented branch OGFs (root has a parent edge already):
- `B_R`: red root, up to 3 children, child colors from `{R,B,Y}`
- `B_B`: blue root, up to 2 children, child colors from `{R,B,Y}`
- `B_Y`: yellow root, up to 2 children, child colors from `{R,B}` only

2. Define vertex-rooted OGFs (true root has no parent edge):
- `R_R`: up to 4 children from `{B_R,B_B,B_Y}`
- `R_B`: up to 3 children from `{B_R,B_B,B_Y}`
- `R_Y`: up to 3 children from `{B_R,B_B}`

3. Use Pólya / cycle-index formulas for bounded multisets (`S_k`, `k<=4`) to compute coefficients up to `n=10000`.

4. Apply dissymmetry theorem:
- `g(n) = V(n) + E(n) - D(n)`
- `V`: vertex-rooted count (`R_R + R_B + R_Y`)
- `D`: directed-edge-rooted count (ordered endpoint branches, excluding `Y-Y`)
- `E`: edge-rooted count (unordered endpoint pairs, including same-endpoint-type symmetric-square terms)

5. Validate against checkpoints (`g(10)`, `g(100)`), then read off `g(10000)`.

## Wrong Approaches And Failures
1. **Treating nodes as labeled**:
- Leads to `g(2)=8` logic and wrong problem target.
- In one trace this cascades into split-graph/labeled spanning-tree formulas and a wrong intermediate final (`419560756`).

2. **Incorrect dissymmetry / edge-rooted assembly**:
- Wrong sign/order or wrong handling of symmetric endpoint pairs can pass tiny checks but fails later (e.g., mismatch by `n=5` / `n=10`).

3. **No end-to-end verification before submission**:
- One trace guesses (`642896317`), another outputs empty `\boxed{}`; both skip required checkpoint-consistent computation.

## Trace Outcomes
- `gp8ldl`: correct (`984183023`)
- `mvyxar`: correct final (`984183023`) after earlier wrong branch
- `nfnx71`: wrong (`642896317`)
- `cc1afm`: wrong (empty final answer)
