# PE 482 - The Incenter of a Triangle

## Problem Summary
Find S(10^7) mod 99991 where S(P) sums L = p + |IA| + |IB| + |IC| over all integer-sided triangles with integer incenter-to-vertex distances and perimeter p ≤ P.

Given: S(10^3) = 3619

## Correct Answer
According to Project Euler solutions database:
- Raw answer: 1400824879147
- Mod 99991: Need to verify (traces give conflicting values)

## Key Mathematical Setup
For triangle with sides a, b, c and semiperimeter s = p/2:
- Define u = s - a, v = s - b, w = s - c (tangent lengths)
- Sides: a = v + w, b = w + u, c = u + v
- Perimeter: p = 2(u + v + w) = 2s
- Inradius: r² = uvw/(u+v+w)
- Distances: IA² = r² + u² = u² + uvw/(u+v+w)

For IA, IB, IC to be integers:
- Let t = uvw/(u+v+w) (must be integer, so (u+v+w) | uvw)
- Need u² + t, v² + t, w² + t all perfect squares
- If A² = u² + t, then A² - u² = (A-u)(A+u) = t

## Trace Outcomes
- **7k7x5t.txt**: Answer 64728 (parameterizes by r, finds primitive triples)
- **wmvx2k.txt**: Answer 64728 (same approach)
- **a9o4zj.txt**: Answer 92469 (different parameterization via w)
- **sao6bw.txt**: Answer 94303 (yet another approach)

## Verification Points
All traces verify S(1000) = 3619 correctly:
- 4 triangles with perimeters ≤ 1000
- (56,100,100) with IA=75, IB=35, IC=35; L=401
- (112,200,200) - scaled by 2; L=802
- (168,300,300) - scaled by 3; L=1203
- (231,250,289) with IA=170, IB=153, IC=120; L=1213
- Sum: 401 + 802 + 1203 + 1213 = 3619 ✓

## Common Approach
All traces correctly derive:
1. The formula IA = sqrt(r² + u²) where u = s - a
2. The parameterization in terms of (u, v, w) where sides are a = v+w, etc.
3. The condition t = uvw/(u+v+w) must be integer
4. Each of u² + t, v² + t, w² + t must be perfect squares
5. Scaling: if (u, v, w) is a solution, so is (ku, kv, kw) for any k ≥ 1

## Where Traces Diverge
The divergence appears to be in:
1. How they enumerate/parameterize primitive solutions
2. Possible bugs in the enumeration bounds or gcd conditions
3. Different modular arithmetic handling

Without external verification of the raw sum, it's difficult to determine which trace has the correct implementation.
