# PE 868 Findings

## Problem Summary
- The permutation order is generated by the bell-ringing "plain changes" rule: repeatedly make one adjacent swap using the largest letter that can move to an unseen permutation.
- Starting from alphabetical order, the task asks for the swap count needed to reach `NOWPICKBELFRYMATHS`, modulo `99991`.

## Correct Answer
- Exact swap count: `3832914911887589`
- Required output: `3832914911887589 mod 99991 = 79057`

## Correct Approach
- Interpret the process as Steinhaus-Johnson-Trotter (SJT) order on a permutation of `1..n` (letters mapped by alphabetical rank).
- Let `rank(p)` be the 0-based SJT index (equal to swap count from the initial sorted permutation).
- Recursive ranking rule for permutation `p` of size `n`:
  - Let `idx` be the 0-based position of the largest element `n` in `p`.
  - Let `q` be `p` with `n` removed; compute `r = rank(q)`.
  - Offset rule:
    - if `r` is even: `offset = n - 1 - idx`
    - if `r` is odd: `offset = idx`
  - Then `rank(p) = r * n + offset`.
- Validate interpretation with the checkpoint `BELFRY -> 59` swaps.
- Apply the recurrence to `NOWPICKBELFRYMATHS`, then reduce modulo `99991`.

## Wrong Approaches And Why They Fail
- Using lexicographic permutation rank instead of SJT rank:
  - Fails sample check (`BELFRY` gives `6`, not `59`).
  - Gives wrong final residue `93831` (instead of `79057`).
- Flipping the SJT block-parity direction rule (wrong offset parity):
  - Fails sample check (`BELFRY` gives `390`, not `59`).
  - Gives wrong final residue `96510` (instead of `79057`).
- Attempting full simulation of all permutations:
  - Requires exploring `18!` states, so it is computationally infeasible for this input.
