# PE 450 Findings

## Correct answer
- \(T(10^6) \bmod 99991 = 3436\).

## Correct approach (what actually works)
- Reparameterize pairs as
  - \(R = g(p+q)\), \(r = gq\), with \(p>q\), \(\gcd(p,q)=1\), \(g\ge 1\).
- Encode rational-angle points by Gaussian rationals on the unit circle (equivalently primitive Pythagorean generators plus unit rotations).
- For fixed \((p,q)\) and a Gaussian generator of norm \(C\), compute an integer divisibility gate:
  - \(d=\gcd(C^p, N_{\mathrm{re}}, N_{\mathrm{im}})\),
  - \(g_0=C^p/d\),
  where \(N_{\mathrm{re}}, N_{\mathrm{im}}\) come from the expanded complex numerator.
- A generator contributes to \(C(R,r)\) iff \(g_0\mid g\). For admissible \(g\), coordinates scale by \(g/g_0\), so summing over \(g\le \lfloor N/(p+q)\rfloor\) gives a triangular factor \(K(K+1)/2\), \(K=\left\lfloor \lfloor N/(p+q)\rfloor / g_0 \right\rfloor\).
- Aggregate contributions with parity/divisor class sums (including careful \(C=1\) handling) rather than brute forcing all \((R,r)\).
- Enforce deduplication of points within each fixed \(C(R,r)\) set; counting per generator without set-dedup overcounts.
- Validate against checkpoints before the final run: \(T(3)=10\), \(T(10)=524\), and modulo checkpoints such as \(T(100)\bmod 99991=80487\), \(T(1000)\bmod 99991=53699\).

## Wrong approaches and why they fail
- Premature pruning to only \(q\in\{1,2\}\) without proof leads to missing cases and wrong checkpoints (notably producing \(T(10)=406\) instead of \(524\)).
- Using an unproved symmetry closed form for odd-\(s\) pair sums \(P(s)\) fails small checks (e.g. \(s=3\) mismatch) and propagates wrong totals.
- Generating primitive triples in only one Euclid-leg ordering (not also swapping ordered legs) undercounts contributions.
- Summing contributions per Gaussian generator without per-\((R,r)\) point dedup inflates totals (double counting).
- Mixing raw values with modulo targets creates false debugging branches (e.g. treating \(80487\) as raw \(T(100)\) rather than \(580442 \bmod 99991\)).
- Incomplete parity/base-term formulas (especially the \(s\equiv 2\pmod 4\) branch and \(D=1\) handling) prevent closure; one failed trace never reaches a numeric final answer, and another falls back to placeholder \(\boxed{0}\).
