## Problem Summary
For odd prime `p`:
- `f(p) = floor(2^(2^p) / p) mod 2^p`
- `g(p) = f(p) mod p`
- `G(N) = sum g(p)` over odd primes `p < N`

Target: `G(10^7)`.

## Correct Answer
`1603036763131`

## Correct Approach
Let `X = 2^(2^p)` and `r = X mod p`.

Key decomposition:
- Write `X = p*q + r` with `q = floor(X/p)`.
- Write `q = 2^p*t + s`, where `s = q mod 2^p = f(p)`.
- Then `X = p*2^p*t + p*s + r`, so
  `X mod (p*2^p) = p*s + r`.
- Therefore
  `f(p) = s = (X mod (p*2^p) - r) // p`, and
  `g(p) = f(p) mod p`.

Now compute `X mod (p*2^p)` via CRT:
- `X mod 2^p = 0` (because exponent `2^p >= p`).
- `X mod p = r`.
- So `X mod (p*2^p) = 2^p * k`, where `2^p * k ≡ r (mod p)`.
- Since `2^p ≡ 2 (mod p)`, `k ≡ r * inv2 (mod p)` with `inv2 = (p+1)//2`.

Equivalent computable formulas used by the traces:
1. Fermat-quotient form:
   - `Q = (((2^(p-1) mod p^2) - 1) // p) mod p`
   - `r = 2^(2^p) mod p = pow(2, pow(2, p, p-1), p)`
   - `g(p) = (Q*r + (r mod 2)) mod p`
2. Congruence form:
   - `a = r`
   - `c = 2^p mod p^2`
   - `k0 = (a * inv2) mod p`
   - `g(p) = ((-a + k0*c) mod p^2) // p`

Both pass the checks:
- `g(31) = 17`
- `G(100) = 474`
- `G(10^4) = 2819236`
- Final `G(10^7) = 1603036763131`

## Wrong Approaches And Why They Fail
- Treating `g(p)` as `floor(X/p) mod p`:
  This drops the required intermediate reduction modulo `2^p` in `f(p)`.
  For `p=3`, it gives `1`, while the correct `g(3)` is `2` (from `f(3)=5`).
- Trying to compute `inv(p) mod 2^p` directly for large `p`:
  Modulus `2^p` is astronomically large for `p` up to `10^7`, so direct inverse computation is not practical.
- Trying to compute `X mod (p*2^p)` directly without CRT:
  The modulus itself is too large; the tractable path is to combine `mod p` and `mod 2^p` residues.
